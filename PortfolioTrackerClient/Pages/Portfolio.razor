@page "/portfolio"
@page "/home"

@using Microsoft.AspNetCore.Components.Authorization;
@inject IAuthService AuthService
@attribute [Authorize]

<CascadingAuthenticationState>
    <AuthorizeView>
        <h3>Hi. You're logged in with <i>@context.User.Identity.Name</i></h3>
    </AuthorizeView>
</CascadingAuthenticationState>

@using Microsoft.AspNetCore.Authorization;
@using PortfolioTrackerClient.Components
@using PortfolioTrackerClient.Services.AuthService;
@using PortfolioTrackerShared.Models.UserModels;
<h3>Portfolio</h3>

<PortfolioPieChart />


@code {

    private async Task<ServiceResponse<User>> GetUserFromDb(AuthenticationState authState)
    {
        return await AuthService.GetUserFromDb(authState.User.Identity.ToString());
    }
}
